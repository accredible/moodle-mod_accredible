define(['jquery','core/ajax','core/templates'],function($,b,c){var d={},e={coursefieldmapping:'coursefieldoptions',coursecustomfieldmapping:'coursecustomfieldoptions',userprofilefieldmapping:'userprofilefieldoptions'},f={init:function(a){d=a;f.setSelectValues();f.add=$('[id*="_add_new_line"]');f.add.on('click',f.addNewLine);f.list=$('.attribute_mapping');f.list.on('click','.remove-line',f.removeLine)},addNewLine:function(){var A=$(this).attr('data-section');f.renderMappingLine({index:f.countLines(A)+1, section:A, accredibleoptions:d.accredibleoptions, moodleoptions:d[e[A]]},`#${A}_content`)},removeLine:function(){var B=$(this).attr('data-id'),C=$(this).attr('data-section');$(`#${C}_mapping_line_${B}`).remove()},countLines:function(_a){return $(`[id*="${_a}_mapping_line"]`).length},setSelectValues:function(){$('.attribute_mapping select.form-control').each((_,_b)=>{var _c=$(_b);_c.val(_c.attr('data-initial-value'))})},renderMappingLine:function(D,_B){c.renderForPromise('mod_accredible/mapping_line',D).then(_A=>c.appendNodeContents(_B,_A.html,_A.js))}};return f});

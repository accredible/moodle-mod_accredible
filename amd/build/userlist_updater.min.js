define(["jquery","core/ajax"],function(i,e){var a={init:function(){i("select#id_groupid").on("change",a.groupChanged),a.lastGroup=i("select#id_groupid").val(),a.courseid=i("input:hidden[name=course]").val(),a.userwarning=i("#users-warning"),a.userscontainer=i("#users-container"),""===a.lastGroup&&(a.userwarning.removeClass("hidden"),a.userscontainer.addClass("hidden"))},groupChanged:function(){i("select#id_groupid").val()!==a.lastGroup&&(a.lastGroup=i("select#id_groupid").val(),""===a.lastGroup?(a.updateChoices([]),a.userwarning.removeClass("hidden"),a.userscontainer.addClass("hidden")):(e.call([{methodname:"mod_accredible_reload_users",args:{courseid:a.courseid,groupid:i("select#id_groupid").val()}}])[0].done(a.updateChoices),a.userwarning.addClass("hidden"),a.userscontainer.removeClass("hidden")))},updateChoices:function(e){var d="";i("#users-container .form-group").not(".femptylabel").remove(),i(e).each(function(e,i){d=i.credential_url?(d=(d=(d=d+("<div id='fitem_id_certlink"+i.id)+"' class='form-group row fitem'><div class='col-md-3 col-form-label d-flex pb-0 pr-md-0'>")+"<span class='d-inline-block'>"+i.name+"   "+i.email+"</span></div><div class='col-md-9 form-inline align-items-start felement' data-fieldtype='static'>")+"<div class='form-control-static'>Certificate "+i.credential_id)+" - <a href='"+i.credential_url+"' target='_blank'>link</a></div></div></div>":(d=(d=(d=(d=(d+="<div class='form-group row fitem checkboxgroup1'><div class='col-md-3'></div><div class='col-md-9 checkbox'><div class='form-check d-flex'>")+"<input type='hidden' name='users["+i.id+"]' value='0'>")+"<input type='checkbox' name='users["+i.id+"]'")+"class='form-check-input checkboxgroup1' value='1' id='id_users_"+i.id+"'>")+"<label for='id_users_"+i.id+"'>")+i.name+"   "+i.email+"</label></div></div></div>"}),a.userscontainer.append(d)}};return a});
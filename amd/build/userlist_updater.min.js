define(["jquery","core/ajax","core/templates"],function(a,b,c){var d={init:function(){a("select#id_groupid").on("change",d.groupChanged),d.lastGroup=a("select#id_groupid").val(),d.courseid=a("input:hidden[name=course]").val(),d.userwarning=a("#users-warning"),d.userscontainer=a("#users-container"),""===d.lastGroup&&(d.userwarning.removeClass("hidden"),d.userscontainer.addClass("hidden"))},groupChanged:function(){a("select#id_groupid").val()!==d.lastGroup&&(d.lastGroup=a("select#id_groupid").val(),""===d.lastGroup?(d.updateChoices([]),d.userwarning.removeClass("hidden"),d.userscontainer.addClass("hidden")):(b.call([{methodname:"mod_accredible_reload_users",args:{courseid:d.courseid,groupid:a("select#id_groupid").val()}}])[0].done(d.updateChoices),d.userwarning.addClass("hidden"),d.userscontainer.removeClass("hidden")))},updateChoices:function(b){a("#users-container .form-group").not(".femptylabel").remove(),a(b).each(function(a,b){if(b.credential_url)var c={element:{html:"Certificate "+b.credential_id+" - <a href="+b.credential_url+' target="_blank">link</a>',staticlabel:!0},label:b.name+"   "+b.email};else var c={element:{id:b.id,name:"users["+b.id+"]",extraclasses:"checkboxgroup1"},label:b.name+"   "+b.email};d.renderUser(c,b.credential_url)})},renderUser:function(a,b){template=b?"core_form/element-static":"core_form/element-advcheckbox",c.renderForPromise(template,a).then(function(a){var b=a.html,d=a.js;c.appendNodeContents("#users-container",b,d)})}};return d});
define(["jquery","core/ajax"],function(a,b){var c={init:function(){a("select#id_groupid").on("change",c.groupChanged),c.lastGroup=a("select#id_groupid").val(),c.courseid=a("input:hidden[name=course]").val(),c.userwarning=a("#users-warning"),c.userscontainer=a("#users-container"),""===c.lastGroup&&(c.userwarning.removeClass("hidden"),c.userscontainer.addClass("hidden"))},groupChanged:function(){a("select#id_groupid").val()!==c.lastGroup&&(c.lastGroup=a("select#id_groupid").val(),""===c.lastGroup?(c.updateChoices([]),c.userwarning.removeClass("hidden"),c.userscontainer.addClass("hidden")):(b.call([{methodname:"mod_accredible_reload_users",args:{courseid:c.courseid,groupid:a("select#id_groupid").val()}}])[0].done(c.updateChoices),c.userwarning.addClass("hidden"),c.userscontainer.removeClass("hidden")))},updateChoices:function(b){var d=(new DOMParser).parseFromString(b,"text/html");a("#users-container .form-group").not(".femptylabel").remove(),c.userscontainer.append(a(d).find("#users-list > div"))}};return c});